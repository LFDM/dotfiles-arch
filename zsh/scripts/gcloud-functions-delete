#!/bin/zsh

# Check if at least 2 arguments are provided (project + at least one function)
if [ $# -lt 2 ]; then
    echo "Usage: gcloud-functions-delete <project> <function1> [function2] [function3] ..."
    echo "Example: gcloud-functions-delete my-project function1 function2 function3"
    exit 1
fi

# First argument is the project
project=$1
shift  # Remove the first argument, leaving only function names

# Iterate over all remaining arguments (function names)
for fn in "$@"; do
    echo "Deleting function: $fn"
    gcloud functions delete "$fn" --project "$project" --quiet
done

echo "All functions deleted successfully!"